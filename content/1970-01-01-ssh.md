title: ssh
date: 1970-01-01
comments: true
categories: 
### 绑定本地端口(翻墙)

`ssh -D 12345 user@host`

SSH会建立一个socket，去监听本地的12345端口。一旦有数据传向那个端口，就自动把它转移到SSH连接上面，发往远程主机。

配合SwitchySharp翻墙不能更爽。

一般用下面的命令启动：

`ssh -f -NT -D 12345 user@host`

N参数，表示只连接远程主机，不打开远程shell；

T参数，表示不为这个连接分配TTY

f参数，表示成功后放入后台执行。

### 端口转发


`ssh -L 33060:host1:3306 host2`

命令中的L参数一共接受三个值，分别是"本地端口:目标主机:目标主机端口"，用冒号分隔。

这条命令的意思，就是指定SSH绑定本地端口33060，然后指定host2将所有的数据，转发到目标主机host1的3306端口。

配合navicat管理远程mysql服务很方便。

ssh 还有一个-R参数。

`ssh -R 2121:host2:21 host1`

R参数也是接受三个值，分别是"远程主机端口:目标主机:目标主机端口"。

这条命令的意思是，开启远程host1上的2121端口,将host1上2121端口的数据转发到host2上的21端口。


参考：[http://www.ruanyifeng.com/blog/2011/12/ssh_port_forwarding.html](http://www.ruanyifeng.com/blog/2011/12/ssh_port_forwarding.html)

