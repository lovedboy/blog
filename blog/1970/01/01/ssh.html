<!DOCTYPE html>
<html lang="en">
<head>
          <title></title>
	    <link href='https://lovedboy.github.io/theme/css/notsobad.css' rel='stylesheet' type='text/css'>


        <meta charset="utf-8" />
        <link href="https://lovedboy.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title=" Full Atom Feed" />
        <link href="https://lovedboy.github.io/feeds/misc.atom.xml" type="application/atom+xml" rel="alternate" title=" Categories Atom Feed" />




</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="https://lovedboy.github.io/"> <strong></strong></a></h1>
        </header><!-- /#banner -->
        <nav id="menu"><ul>
            <li><a href="/">home</a></li>
            <li><a href="/">links</a></li>
            <li><a href="/">about</a></li>
        </ul></nav><!-- /#menu -->
<section id="content" class="body">
  <header>
    <h2 class="entry-title">
      <a href="https://lovedboy.github.io/blog/1970/01/01/ssh.html" rel="bookmark"
         title="Permalink to ssh">ssh</a>
		 
    <abbr class="published" title="1970-01-01T00:00:00+08:00">
      1970-01-01 00:00
    </abbr>
		 </h2>
 
  </header>
    <div class="entry-content">
    <h3>绑定本地端口(翻墙)</h3>
<p><code>ssh -D 12345 user@host</code></p>
<p>SSH会建立一个socket，去监听本地的12345端口。一旦有数据传向那个端口，就自动把它转移到SSH连接上面，发往远程主机。</p>
<p>配合SwitchySharp翻墙不能更爽。</p>
<p>一般用下面的命令启动：</p>
<p><code>ssh -f -NT -D 12345 user@host</code></p>
<p>N参数，表示只连接远程主机，不打开远程shell；</p>
<p>T参数，表示不为这个连接分配TTY</p>
<p>f参数，表示成功后放入后台执行。</p>
<h3>端口转发</h3>
<p><code>ssh -L 33060:host1:3306 host2</code></p>
<p>命令中的L参数一共接受三个值，分别是"本地端口:目标主机:目标主机端口"，用冒号分隔。</p>
<p>这条命令的意思，就是指定SSH绑定本地端口33060，然后指定host2将所有的数据，转发到目标主机host1的3306端口。</p>
<p>配合navicat管理远程mysql服务很方便。</p>
<p>ssh 还有一个-R参数。</p>
<p><code>ssh -R 2121:host2:21 host1</code></p>
<p>R参数也是接受三个值，分别是"远程主机端口:目标主机:目标主机端口"。</p>
<p>这条命令的意思是，开启远程host1上的2121端口,将host1上2121端口的数据转发到host2上的21端口。</p>
<p>参考：<a href="http://www.ruanyifeng.com/blog/2011/12/ssh_port_forwarding.html">http://www.ruanyifeng.com/blog/2011/12/ssh_port_forwarding.html</a></p>
  </div><!-- /.entry-content -->
</section>
        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                By <a href="http://github.com/lovedboy" target="_blank">@lovedb0y</a>
                </address><!-- /#about -->
        </footer><!-- /#contentinfo -->
</body>
</html>