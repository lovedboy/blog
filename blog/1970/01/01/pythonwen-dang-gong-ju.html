<!DOCTYPE html>
<html lang="en">
<head>
          <title></title>
	    <link href='https://lovedboy.github.io/theme/css/notsobad.css' rel='stylesheet' type='text/css'>


        <meta charset="utf-8" />
        <link href="https://lovedboy.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title=" Full Atom Feed" />
        <link href="https://lovedboy.github.io/feeds/misc.atom.xml" type="application/atom+xml" rel="alternate" title=" Categories Atom Feed" />




</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="https://lovedboy.github.io/"> <strong></strong></a></h1>
        </header><!-- /#banner -->
        <nav id="menu"><ul>
            <li><a href="/">home</a></li>
            <li><a href="/">links</a></li>
            <li><a href="/">about</a></li>
        </ul></nav><!-- /#menu -->
<section id="content" class="body">
  <header>
    <h2 class="entry-title">
      <a href="https://lovedboy.github.io/blog/1970/01/01/pythonwen-dang-gong-ju.html" rel="bookmark"
         title="Permalink to Python文档工具">Python文档工具</a>
		 
    <abbr class="published" title="1970-01-01T00:00:00+08:00">
      1970-01-01 00:00
    </abbr>
		 </h2>
 
  </header>
    <div class="entry-content">
    <p>程序员最讨厌的两件事情：给项目写文档和接手的项目没有文档。</p>
<p>介绍一个文档生成工具。<a href="http://sphinx-doc.org/">sphinx</a>，据说Python的官方文档就是这货生成的。</p>
<p>但不是markdown语法写作不开心啊，你需要<a href="https://github.com/jgm/pandoc">pandoc</a>。</p>
<p>一个小伙伴发我的步骤：</p>
<div class="highlight"><pre><span></span>1.==&gt;To run doc, packages following should be installed:

apt-get install pandoc
apt-get install python-sphinx

2.==&gt;How can we use it?

(1) mkdir doc &amp;&amp; cd doc

(2)Run command: sphinx-quickstart

(3)After configuration:

You should now populate your master file ./source/index.rst and create other documentation
source files. Use the Makefile to build the docs, like so:
   make builder
where &quot;builder&quot; is one of the supported builders, e.g. html, latex or linkcheck.

3.==&gt;For the detail, checkout the link

http://sphinx-doc.org/latest/tutorial.html

4.==&gt;Write doc

(1)Write your document with markdown syntax in directory source, such as

xx.md
yy.md

(2)Add content in file index.rst
xx
yy

5.==&gt;Make doc

Run the following command:

bash run_doc.sh

6.==&gt;Visit document

(1)add configure in nginx

     location /doc/ {
         alias path/doc/build/html/;
     }

(2)visit document

   http://yourdomain/doc/index.html


7.markdown editor

http://mahua.jser.me
</pre></div>


<p>run_doc.sh 脚本:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>

<span class="nv">files</span><span class="o">=</span>./source/*.md

<span class="k">for</span> file in <span class="nv">$files</span>
<span class="k">do</span>
    pandoc <span class="s2">&quot;</span><span class="nv">$file</span><span class="s2">&quot;</span> -o <span class="s2">&quot;</span><span class="si">${</span><span class="nv">file</span><span class="p">%.md</span><span class="si">}</span><span class="s2">.rst&quot;</span> 
<span class="k">done</span>

make html
</pre></div>
</td></tr></table>

<p>如果需要限制文档匿名访问。可以在alias上面加上这两行：<a href="http://nginx.org/en/docs/http/ngx_http_auth_basic_module.html">参考</a></p>
<div class="highlight"><pre><span></span> auth_basic &quot;WTF,PASSWORD?&quot;;
 auth_basic_user_file conf/htpasswd;
</pre></div>


<p>如何生成password，你可以下载<a href="https://gist.github.com/lovedboy/ae4e1e7432d41cb6e712">nginx_auth.py</a>.</p>
<div class="highlight"><pre><span></span>python nginx_auth.py username password &gt;&gt; conf/htpasswd
</pre></div>
  </div><!-- /.entry-content -->
</section>
        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                By <a href="http://github.com/lovedboy" target="_blank">@lovedb0y</a>
                </address><!-- /#about -->
        </footer><!-- /#contentinfo -->
</body>
</html>