<!DOCTYPE html>
<html lang="en">
<head>
          <title></title>
	    <link href='https://lovedboy.github.io/theme/css/notsobad.css' rel='stylesheet' type='text/css'>


        <meta charset="utf-8" />
        <link href="https://lovedboy.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title=" Full Atom Feed" />
        <link href="https://lovedboy.github.io/feeds/misc.atom.xml" type="application/atom+xml" rel="alternate" title=" Categories Atom Feed" />




</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="https://lovedboy.github.io/"> <strong></strong></a></h1>
        </header><!-- /#banner -->
        <nav id="menu"><ul>
            <li><a href="/">home</a></li>
            <li><a href="/">links</a></li>
            <li><a href="/">about</a></li>
        </ul></nav><!-- /#menu -->
<section id="content" class="body">
  <header>
    <h2 class="entry-title">
      <a href="https://lovedboy.github.io/blog/1970/01/01/zheng-jiu-tian-mao-mo-he.html" rel="bookmark"
         title="Permalink to 拯救天猫魔盒">拯救天猫魔盒</a>
		 
    <abbr class="published" title="1970-01-01T00:00:00+08:00">
      1970-01-01 00:00
    </abbr>
		 </h2>
 
  </header>
    <div class="entry-content">
    <p>由于众所周知的原因，天猫魔盒升级后删除了所有的非官方视频播放软件。重新安装后软件会被秒删，或者重启后会被清理，这后门留的。少了这些非官方的视频播放软件，盒子基本就成一块板砖了，无奈开启盒子拯救之路。</p>
<p>1, <strong>首先将盒子恢复出厂设置，为的是降级处理。</strong></p>
<p>2, <strong>配置dns服务器，屏蔽阿里系的所有域名。</strong></p>
<p>因为盒子的网络配置是可以指定dns服务器的，为了快速屏蔽阿里系的所有域名，考虑为盒子搭建一个dns服务器。
我用的<a href="https://wiki.archlinux.org/index.php/Dnsmasq">dnsmasq</a>，安装完成后在配置文件中添加下列文件。</p>
<div class="highlight"><pre><span></span>listen-address= your-ip
address=/.aliyun.com/127.0.0.1
address=/.yunos.com/127.0.0.1
address=/.taobao.com/127.0.0.1
address=/.alipay.com/127.0.0.1
address=/.wasu.tv/127.0.0.1
address=/.alipay-inc.com/127.0.0.1
address=/.alibaba.com/127.0.0.1
server=119.29.29.29
</pre></div>


<p>3, <strong>屏蔽ip</strong></p>
<p>屏蔽域名还不能完全起作用，盒子的升级请求可能通过请求固定ip来控制的，这方面我就没有抓包了。在贴吧上看到需要屏蔽下面三个ip才能完全起作用。于是在路由器上面针对盒子添加了几条上网控制规则。</p>
<div class="highlight"><pre><span></span>140.205.172.1
42.120.158.67
42.156.141.75
</pre></div>
  </div><!-- /.entry-content -->
</section>
        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                By <a href="http://github.com/lovedboy" target="_blank">@lovedb0y</a>
                </address><!-- /#about -->
        </footer><!-- /#contentinfo -->
</body>
</html>